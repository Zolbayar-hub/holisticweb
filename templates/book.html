<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Your Session - Holistic Wellness</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='book.css') }}">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header class="booking-header">
            <h1><i class="fas fa-lotus"></i> Book Your Holistic Session</h1>
            <p>Choose your service and preferred time for a transformative experience</p>
        </header>

        <div class="booking-content">
            <!-- Step 1: Service Selection -->
            <div class="booking-step active" id="step-1">
                <div class="step-header">
                    <span class="step-number">1</span>
                    <h2>Choose Your Service</h2>
                </div>
                
                <div class="services-grid" id="services-grid">
                    <!-- Services will be loaded dynamically -->
                </div>
                
                <div class="step-actions">
                    <button class="btn btn-primary" id="next-to-datetime" disabled>
                        Next: Select Date & Time <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Step 2: Date & Time Selection -->
            <div class="booking-step" id="step-2">
                <div class="step-header">
                    <span class="step-number">2</span>
                    <h2>Select Date & Time</h2>
                </div>
                
                <div class="datetime-container">
                    <div class="calendar-section">
                        <h3><i class="fas fa-calendar-alt"></i> Choose Date</h3>
                        <div class="calendar" id="calendar">
                            <!-- Calendar will be generated by JavaScript -->
                        </div>
                    </div>
                    
                    <div class="time-section">
                        <h3><i class="fas fa-clock"></i> Available Times</h3>
                        <div class="selected-date-display" id="selected-date-display">
                            Select a date to see available times
                        </div>
                        <div class="time-slots" id="time-slots">
                            <!-- Time slots will be populated based on selected date -->
                        </div>
                    </div>
                </div>
                
                <div class="step-actions">
                    <button class="btn btn-secondary" id="back-to-service">
                        <i class="fas fa-arrow-left"></i> Back
                    </button>
                    <button class="btn btn-primary" id="next-to-details" disabled>
                        Next: Your Details <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Step 3: Contact Details -->
            <div class="booking-step" id="step-3">
                <div class="step-header">
                    <span class="step-number">3</span>
                    <h2>Your Details</h2>
                </div>
                
                <form class="contact-form" id="contact-form">
                    <div class="form-group">
                        <label for="user-name">
                            <i class="fas fa-user"></i> Full Name
                        </label>
                        <input type="text" id="user-name" name="user-name" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="user-email">
                            <i class="fas fa-envelope"></i> Email Address
                        </label>
                        <input type="email" id="user-email" name="user-email" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="user-phone">
                            <i class="fas fa-phone"></i> Phone Number
                        </label>
                        <input type="tel" id="user-phone" name="user-phone">
                    </div>
                    
                    <div class="form-group">
                        <label for="num-people">
                            <i class="fas fa-users"></i> Number of People
                        </label>
                        <select id="num-people" name="num-people" required>
                            <option value="1" selected>1 person (just me)</option>
                            <option value="2">2 people</option>
                            <option value="3">3 people</option>
                            <option value="4">4 people</option>
                            <option value="5">5 people</option>
                            <option value="6">6 people</option>
                            <option value="7">7 people</option>
                            <option value="8">8 people</option>
                            <option value="9">9 people</option>
                            <option value="10">10 people (maximum)</option>
                        </select>
                        <small class="help-text">You can book for up to 10 people total. You will be the main contact for the group.</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="special-requests">
                            <i class="fas fa-comment"></i> Special Requests (Optional)
                        </label>
                        <textarea id="special-requests" name="special-requests" rows="3" placeholder="Any specific needs or preferences..."></textarea>
                    </div>
                </form>
                
                <div class="step-actions">
                    <button class="btn btn-secondary" id="back-to-datetime">
                        <i class="fas fa-arrow-left"></i> Back
                    </button>
                    <button class="btn btn-primary" id="next-to-summary">
                        Review Booking <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Step 4: Booking Summary -->
            <div class="booking-step" id="step-4">
                <div class="step-header">
                    <span class="step-number">4</span>
                    <h2>Confirm Your Booking</h2>
                </div>
                
                <div class="booking-summary" id="booking-summary">
                    <!-- Summary will be populated by JavaScript -->
                </div>
                
                <div class="step-actions">
                    <button class="btn btn-secondary" id="back-to-details">
                        <i class="fas fa-arrow-left"></i> Back
                    </button>
                    <button class="btn btn-success" id="confirm-booking">
                        <i class="fas fa-check"></i> Confirm Booking
                    </button>
                </div>
            </div>

            <!-- Success Message -->
            <div class="booking-step" id="step-success" style="display: none;">
                <div class="success-message">
                    <i class="fas fa-check-circle"></i>
                    <h2>Booking Confirmed!</h2>
                    <p>Your session has been successfully booked. You will receive a confirmation email shortly.</p>
                    <div class="booking-details" id="confirmation-details">
                        <!-- Confirmation details will be populated -->
                    </div>
                    <div class="success-actions">
                        <button class="btn btn-primary" onclick="location.reload()">
                            Book Another Session
                        </button>
                        <a href="{{ url_for('booking_bp.my_bookings') }}" class="btn btn-outline-primary">
                            <i class="fas fa-calendar-check me-1"></i>
                            View My Bookings
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Progress Indicator -->
        <div class="progress-bar">
            <div class="progress-step active" data-step="1">
                <span>Service</span>
            </div>
            <div class="progress-step" data-step="2">
                <span>Date & Time</span>
            </div>
            <div class="progress-step" data-step="3">
                <span>Details</span>
            </div>
            <div class="progress-step" data-step="4">
                <span>Confirm</span>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay">
        <div class="loading-spinner">
            <i class="fas fa-spinner fa-spin"></i>
            <p>Processing your booking...</p>
        </div>
    </div>

    <!-- Error Modal -->
    <div class="modal" id="error-modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3><i class="fas fa-exclamation-triangle"></i> Error</h3>
            <p id="error-message"></p>
            <button class="btn btn-primary" onclick="closeModal()">OK</button>
        </div>
    </div>

    <script src="{{ url_for('static', filename='book.js') }}"></script>
</body>
</html>
